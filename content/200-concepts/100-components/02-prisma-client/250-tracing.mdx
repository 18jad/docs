---
title: 'Tracing'
metaTitle: 'Tracing (Preview)'
metaDescription: 'Diagnose application performance with detailed traces of each query.'
preview: true
tocDepth: 3
---

<TopBlock>

Prisma tracing provides a record of each query that Prisma Client generates. It helps you analyze your application's performance and identify bottlenecks. Tracing is fully compliant with [OpenTelemetry](https://opentelemetry.io/), so you can use it as part of your end-to-end application tracing path.

<Admonition type="info">

Tracing gives you a detailed, query-level insight into your Prisma project. If you want higher-level, aggregated numerical reporting, such as query counts, connection counts, and total query execution times, see [Metrics](/concepts/components/prisma-client/metrics).

</Admonition>

</TopBlock>

## About tracing

When you enable tracing, Prisma Client writes out details of all queries that it calls. Each tracing span represents a query, and includes the following:

- the SQL statement or command
- the total query execution time

You can send this output to the console, or analyze it in any OpenTelemetry-compatible tracing system, such as [Jaeger](https://www.jaegertracing.io/).

TBW:

- say here what it logs - basically every database query that Prisma calls
- show screenshot in Jaeger with examples
- what level of detail does it log? I think I'd like a screenshot of the output to the console - so I can see the form it takes. Maybe ask Daniel to copy/paste that so I can - include it as console output
- Do we want to talk about [spans](https://www.jaegertracing.io/docs/1.35/architecture/#span) here? Is a span equivalent to a query?
- A diagram - showing a trace in the a Prisma context? Going from App -> Prisma Client -> Database and back?
- question: does it records the time for the query to execute and return data?
- do we have child spans? what are the spans we offer?

## Output

Prisma tracing outputs the following information:

**TBW**

## Prerequisites

To use tracing, you must do the following:

1. [Install the appropriate dependencies](#step-1-install-up-to-date-prisma-dependencies).
1. [Enable the `tracing` feature flag in your Prisma schema file](#step-2-enable-the-feature-flag-in-the-prisma-schema-file).

### Step 1. Install up-to-date Prisma dependencies

Use version `4.1.0` or higher of the `prisma`, `@prisma/client`, and '@prisma/instrumentation' npm packages.

```terminal
npm install prisma@latest --save-dev
npm install @prisma/client@latest --save
npm install @prisma/instrumentation --save
npm install @opentelemetry/instrumentation --save
```

**TBA: do we need to install @opentelemetry/instrumentation?**

### Step 2: Enable the feature flag in the Prisma schema file

In the `generator` block of your `schema.prisma` file, enable the `tracing` feature flag:

```prisma
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["tracing"]
}
```

### Step 3:

Add the following to your application code:

```ts
import { registerInstrumentations } from '@opentelemetry/instrumentation'
import { PrismaInstrumentation } from '@prisma/instrumentation'

export function otelSetup() {
  registerInstrumentations({
    instrumentations: [new PrismaInstrumentation()],
  })
}
```

## Send tracing to the console

To send metrics to the console, add the following to you application code:

## Send tracing to Jaeger

To send metrics to Jaeger, add the following to you application code:

Get the application code sample to do this

How to generalize this to other tracing packages?

## Send tracing to a file

Is this a mainstream use case? Do we need to give an example of this?
