---
title: 'Tracing'
metaTitle: 'Tracing (Preview)'
metaDescription: 'Diagnose application performance with detailed traces of each query.'
preview: true
tocDepth: 3
---

<TopBlock>

Tracing provides a record of each query that Prisma Client generates. It is fully compliant with [OpenTelemetry](https://opentelemetry.io/), so you can use tracing as part of your end-to-end application diagnostics.

<Admonition type="info">

Tracing provides a detailed, query-by-query insight into your Prisma project. If you want a higher-level analysis, see [Metrics](/concepts/components/prisma-client/metrics).

</Admonition>

</TopBlock>

## About tracing

You can send tracing information to the console, or analyze it in any OpenTelemetry-compatible tracing system, such as [Jaeger](https://www.jaegertracing.io/).

TBW:

- say here what it logs - basically every database query that Prisma calls
- show screenshot in Jaeger with examples
- what level of detail does it log? I think I'd like a screenshot of the output to the console - so I can see the form it takes. Maybe ask Daniel to copy/paste that so I can - include it as console output

---

Prisma Client provides the following metrics:

- Counters (always increase):

  - `query_total_queries`: The total number of database queries executed.
  - `query_total_operations`: The total number of Prisma operations executed.
    - A Prisma operation is a statement like `await prisma.user({ include: { posts: true }})`, which Prisma Client translates into one or more SQL queries.
    - The value returned by `query_total_operations` can be less than `query_total_queries`, because some operations create multiple queries.

- Gauges (can increase or decrease):

  - `pool_active_connections`: The number of active connections in use.
  - `pool_idle_connections`: The number of connections that are not being used.
  - `pool_wait_count`: The number of workers waiting for a connection because all connections are in use.
  - `query_active_transactions`: The number of active transactions.

- Histograms (metrics data divided into a collection of values; we call each container in the collection a "bucket"):

  - `pool_wait_duration_ms`: The wait time for a worker to get a connection.
  - `query_total_elapsed_time_ms`: The execution time for all database queries executed.
  - `query_operation_total_elapsed_time_ms`: The execution time for all operations. This includes the time taken to execute all database queries, and to carry out all database engine activities, such as joining data and transforming data to the correct format.

You can [add global labels to your metrics data](#global-labels) to help you group and separate your metrics, for example by infrastructure region or server.

## Prerequisites

To use tracing, you must do the following:

1. [Install the appropriate dependencies](#step-1-install-up-to-date-prisma-dependencies).
1. [Enable the `tracing` feature flag in your Prisma schema file](#step-2-enable-the-feature-flag-in-the-prisma-schema-file).

### Step 1. Install up-to-date Prisma dependencies

Use version `4.1.0` or higher of the `prisma` and `@prisma/client` npm packages.

```terminal
npm install prisma@latest --save-dev
npm install @prisma/client@latest --save
```

### Step 2: Enable the feature flag in the Prisma schema file

In the `generator` block of your `schema.prisma` file, enable the `tracing` feature flag:

```prisma
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["tracing"]
}
```

## Send tracing to the console

To send metrics to the console, add the following to you application code:

## Send tracing to Jaeger

To send metrics to Jaeger, add the following to you application code:

How to generalize this to other tracing packages?

## Send tracing to a file

Is this a mainstream use case? Do we need to give an example of this?
