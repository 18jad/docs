---
title: "Considerations"
metaTitle: "Important Considerations about the Data Proxy"
metaDescription: "Learn about important considerations when you use the Data Proxy in your JavaScript/TypeScript application with Prisma ORM in serverless and edge environments."
---

### Limitations

The Data Proxy does not yet support the following preview features:

- [Interactive Transactions](/concepts/components/prisma-client/transactions#interactive-transactions-in-preview)
- [Metrics](/concepts/components/prisma-client/metrics)
- [OpenTelemetry tracing](/concepts/components/prisma-client/opentelemetry-tracing)

To use the Data Proxy, you must first remove `interactiveTransactions`, `metrics` and `tracing` from the `previewFeatures` section of your `schema.prisma` file.

For example:

```diff
   generator client {
     provider        = "prisma-client-js"
-     previewFeatures = ["interactiveTransactions", "metrics", "tracing"]
+     previewFeatures = []
   }
```

When you run `prisma generate --data-proxy`, you will receive an error if you have one or more of these preview features enabled.

### Providing the connection string to Prisma Migrate

Currently, the Data Proxy can only be used to _query_ your database with [Prisma Client](/concepts/components/prisma-client).

Migrations can be only be run on a direct (non-proxied) database connection. Assuming that your schema uses `env("DATABASE_URL")`, you'll need to override the `DATABASE_URL` environment variable before running `prisma migrate`. You can declare another environment variable, for example `MIGRATE_DATABASE_URL`, and use that to override the connection:

```js file=package.json highlight=5;add
{
  ...,
  "scripts": {
    "generate-client": "prisma generate --data-proxy",
    "migrate-deploy": "DATABASE_URL=\"$MIGRATE_DATABASE_URL\" prisma migrate deploy",
    ...
  }
}
```

### Deploying to Vercel Serverless Functions

You only need minimal changes to an existing project using Prisma Client with [Vercel Serverless Functions](https://vercel.com/docs/concepts/functions#serverless-functions) to start using the Data Proxy.

Our Vercel Deployment sample repository has a [special branch](https://github.com/prisma/deployment-example-vercel/tree/data-proxy) showing how to deploy a Prisma application to Vercel Serverless Functions using the Data Proxy. [Use this link to create a Vercel project based on this branch](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fprisma%2Fdeployment-example-vercel%2Ftree%2Fdata-proxy&env=DATABASE_URL,MIGRATE_DATABASE_URL,PRISMA_GENERATE_DATAPROXY&envDescription=DATABASE_URL%20-%20Data%20Proxy%20URL%2C%20MIGRATE_DATABASE_URL%20-%20direct%20connection%20string%2C%20PRISMA_GENERATE_DATAPROXY%20-%20always%20set%20to%20true%20so%20Vercel%20generates%20a%20Data%20Proxy%20Client&envLink=https%3A%2F%2Fwww.prisma.io%2Fdocs%2Fconcepts%2Fdata-platform%2Fdata-proxy%23using-the-data-proxy-in-a-prisma-application). It makes sure you set the correct environment variables for getting a Prisma Client for Data Proxy and running migrations when Data Proxy is configured.

If you want to adapt your project manually:

- Add an environment variable `PRISMA_GENERATE_DATAPROXY` to your [Vercel project settings](https://vercel.com/docs/concepts/projects/environment-variables) and set its value to `true`.
- If you want to deploy migrations via Vercel, follow our instructions on how to ["Providing the connection string to Prisma Migrate"](#providing-the-connection-string-to-prisma-migrate)

### Deploying to Cloudflare Workers

The Data Proxy allows you to deploy Prisma projects to Cloudflare Workers. To learn more, check out the [Cloudflare Workers deployment guide](/guides/deployment/deployment-guides/deploying-to-cloudflare-workers).

### Connecting to a database hosted with a provider different than AWS

It's possible to connect to a database hosted on any provider, but it needs to be accessible from the public internet. For best results and response times, you should configure the proxy in a region that is the same or as close as possible to the database.

We are looking to expand the number of providers and regions in the future. If a region or provider is not yet supported, you can [submit a request](https://pris.ly/proxy-new-region). This will help us prioritize providers and regions to add next.

### Connection limits

We recommend using a database that supports at least 20 concurrent connections.
Setting a concurrency limit on AWS Lambda should not be required, but you should be aware that, if necessary, requests will be queued until they can be processed.

### Reaching the Data Proxy concurrency limits

Depending on your [project plan](/data-platform/billing/plans-and-quotas), the Prisma Data Proxy provides a different [limit of concurrent proxy instances](/data-platform/about/limits-and-status#concurrency-limits-of-the-data-proxy).

The performance of a single proxy instance depends on a large number of variables:

- the type of queries
- latencies and deployment locations
- the performance of your database
- ...

If you are seeing `429` HTTP errors in your logs, this probably means that you are hitting the concurrency limits.

[Contact Support](/data-platform/troubleshooting/contact-support) if you are hitting the concurrency limits and have trouble scaling your Prisma application.

### Managing the number of database connections

Each Data Proxy instance has its own connection pool. The size of each of these individual connection pools can be adjusted via the `connection_limit` parameter in the database connection string of the environment.

```
postgresql://user:password@host:5432/mydb?connection_limit=60
```

### Idle connections to the database

The Data Proxy creates several connection pools that maintain open idle connections even when no queries run from your application. The connection pools and any remaining idle connections close after six minutes of inactivity (no queries are sent to the database).

In each of the supported locations, the Data Proxy architecture includes multiple clusters that maintain idle connections to the database. This architecture ensures high availability in case of failures in any of the clusters.

This architecture has a number of benefits.

- **High availability**. The Data Proxy maintains a separate connection pool from each cluster in a location. This guarantees that at least one connection pool is always available to handle queries.
- **Load balancing**. The Data Proxy distributes the load of the database queries among the number of available connection pools.
- **Scalability**. The Data Proxy starts new connection pools when an application experiences peak activity and stops existing connection pools (but two always remain with at least one being active in a separate cluster) when the peak activity subsides.
